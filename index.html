<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR - Cubo Interativo</title>

    <!-- Importando A-Frame e AR.js -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/jeromeetienne/AR.js@1.7.2/aframe/build/aframe-ar.min.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">

    <!-- Cena de AR -->
    <a-scene embedded arjs>
        <!-- Permite adicionar objetos no espaço AR -->
        <a-marker preset="hiro">
            <!-- Cubo 3D que pode ser movimentado -->
            <a-box id="cubo" position="0 0.1 0" rotation="0 45 0" 
                   material="color: blue" 
                   scale="0.2 0.2 0.2"
                   draggable>
            </a-box>
        </a-marker>

        <!-- Câmera -->
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        let cubo = document.getElementById("cubo");
        let isDragging = false;
        let lastX = 0, lastY = 0;
        let position = { x: 0, y: 0.1, z: 0 };
        
        // Permite mover o cubo ao tocar e arrastar
        document.addEventListener("mousedown", (event) => {
            isDragging = true;
            lastX = event.clientX;
            lastY = event.clientY;
        });

        document.addEventListener("mousemove", (event) => {
            if (!isDragging) return;

            let deltaX = (event.clientX - lastX) * 0.001;
            let deltaY = (event.clientY - lastY) * 0.001;

            position.x += deltaX;
            position.y -= deltaY;

            cubo.setAttribute("position", `${position.x} ${position.y} ${position.z}`);

            lastX = event.clientX;
            lastY = event.clientY;
        });

        document.addEventListener("mouseup", () => {
            isDragging = false;
        });

        // Toque no cubo para trocar de cor
        cubo.addEventListener("click", () => {
            let corAtual = cubo.getAttribute("material").color;
            cubo.setAttribute("material", "color", corAtual === "blue" ? "red" : "blue");
        });

    </script>

</body>
</html>
